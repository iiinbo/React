
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  
</head>
<body>
  <%-include('../layout/header.ejs')%>
  
<div class="container mt-3">
  <h1 style="margin-top: 20px; margin-bottom: 20px;">회원가입</h1>

  <div class="input-group mb-3">
    <input type="text" class="form-control" placeholder="아이디" id="userid" name="userid">
  </div>

  <div class="input-group mb-3">
    <input type="password" class="form-control" placeholder="패스워드" id="password" name="password">
  </div>


  
  	<div class="container" style="text-align:right">
	 
	  <div class="btn-group">
	    
       <button type="button" class="btn btn-primary" id="btnLogin">로그인</button>&nbsp;&nbsp;
      
	    <button type="button" class="btn btn-primary" id="btnCancel">취소</button>&nbsp;&nbsp;
	  </div>
	</div>
</form>	
</div>

</body>
</html>

<script>

// 1- 로그인 버튼과 취소 버튼 함수를 먼저 생성해두고, 아래에서 function으로 기능 만들기
$(document).ready(() =>{
  $("#btnLogin").click( goLogin ); // goLogin() : 함수를 실행한 결과를 여기로 전달할거란 의미
  $("#btnCancel").click( goCancel ); 
  //로그인 기능 함수
  function goLogin(){
    $.ajax(
      {
      url : "/member/login",
      data : {userid : $("#userid").val(),
              password : $("#password").val()},
      dataType : "json",
      method : "post"
    })
    .done( (res)=>{
      console.log(res.result);
      if(res.result == "success"){
        alert(res.msg);
        location.href="/"; //로그인 성공됐다고 알림 후 로그인 완료된 메인페이지로 연동.
      }else{
         alert(res.meg);
      }
    })
    .fail( (res, status, error)=>{
      console.log(status);
     
    })
    }
  });
// 기현님 코드
//   $("#btnLogin").click(() => {
//     let userid = $("#userid").val();
//     let password = $("#password").val();
  
//   $.ajax({
//     url : "/member/login",
//     data : {userid : userid, password : password},
//     method : "post",
//     dataType : "json"
//   }).then((result) =>{
//   if (result.result == "success"){
//     alert("로그인 성공")
//     location.href = "/board";
//   } else {
//     alert("비밀번호 오류")
//   }
// }).catch((res, status, error) => {
//     alert("로그인 실패")
//     console.log(status);
//   });

// });





</script>